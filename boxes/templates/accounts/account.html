{% extends "base.html" %}
{% block content %}

{% load static %}
<script src="{% static 'js/account.js' %}"></script>

{% include "_messages.html" %}

<div class="row">
    <div class="col" id="descdisplay" style="display: flex; align-items: center;">
        <h2 id="accountdesc">{{ account.description }}</h2>
        <i class="fas fa-pencil"
           id="editaccountdesc"
           style="cursor: pointer;
                  margin-left: 10px;
                  font-size: 1em;"></i>
    </div>
    <div class="col d-none" id="descedit" style="display: flex; align-items: center;">
        <input class="form-control" id="accountdesceditbox"></input>
        <i class="fas fa-check-square"
           id="saveaccountdesc"
           data-account-id="{{ account_id }}"
           style="cursor: pointer;
                  margin-left: 10px;
                  font-size: 2em;
                  color: #28a745;"></i>
    </div>
    <div class="col text-end">
        <h4><strong>Balance:</strong> {{ account.hr_balance }}</h4>
    </div>
</div>

{% if page_obj %}
<h4>Audit Log</h4>
<div class="table-responsive">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th scope="col">User</th>
                <th scope="col">Tracking Code</th>
                <th scope="col">Payment</th>
                <th scope="col">Charge</th>
                <th scope="col">Description</th>
                <th scope="col">Timestamp</th>
            </tr>
        </thead>
        <tbody>
            {% for entry in page_obj %}
                <tr>
                    <td>{{ entry.user__first_name }} {{ entry.user__last_name }}</td>
                    <td>
                        <a href="/packages/{{ entry.package_id }}">
                            {{ entry.package__tracking_code }}
                        </a>
                    </td>
                    <td>${{ entry.credit }}</td>
                    <td>${{ entry.debit }}</td>
                    <td>{{ entry.description }}</td>
                    <td class="timestamp" data-timestamp="{{ ledger.timestamp.isoformat }}">
                        {{ entry.timestamp }}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

{% endblock %}
