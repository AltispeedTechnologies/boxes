{% extends "base.html" %}

{% block content %}
{% include "_messages.html" %}

{% if package %}
<div class="container mt-5">
    <div class="card border-primary mb-3">
        <div class="card-header bg-primary text-white">Package Details</div>
        <div class="card-body text-primary">
            <h5 class="card-title">{{ package.carrier__name }} - {{ package.tracking_code }}</h5>
            <p class="card-text"><strong>Price:</strong> {{ package.price }}</p>
            <p class="card-text"><strong>Account Name:</strong> {{ package.account__name }}</p>
            <p class="card-text"><strong>Package Type:</strong> {{ package.package_type__description }}</p>
            <p class="card-text"><strong>Comments:</strong> {{ package.comments }}</p>
        </div>
    </div>
</div>
{% endif %}

{% if state_ledger %}
<h3>State Audit Log</h3>
<div class="table-responsive">
  <table class="table">
    <thead>
      <tr>
        <th scope="col">User</th>
        <th scope="col">State</th>
        <th scope="col">Timestamp</th>
      </tr>
    </thead>
    <tbody>
      {% for ledger in state_ledger %}
      <tr>
        <td>{{ ledger.user__first_name }} {{ ledger.user__last_name }}</td>
        <td>{{ ledger.state }}</td>
        <td class="timestamp" data-timestamp="{{ ledger.timestamp.isoformat }}">
            {{ ledger.timestamp }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endif %}

{% endblock %}
